<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Counter Example</title>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/stimulus/dist/stimulus.umd.js"></script>
    <script>
        (() => {
            const application = Stimulus.Application.start()

            application.register("counter", class extends Stimulus.Controller {
                static get targets() {
                    return [ "output" ]
                }
                
                initialize(){
                    // console.log("initialize", this.data.get('count'));
                    // console.log("initialize", this.count);
                    // this.outputTarget.textContent = this.data.get('count')
                    this.outputTarget.textContent = this.count
                }
                
                increment(){
                    console.log("increment");
                    this.count++
                    // this.data.set("count", this.outputTarget.textContent++)
                }
                decrement(){
                    console.log("decrement");
                    this.count--
                    // this.data.set("count", this.outputTarget.textContent--)
                }
                
                // getter
                get count(){
                    return this.data.get("count")
                }
                
                // setter
                set count(value){
                    this.data.set("count", value)
                    this.outputTarget.textContent = this.count
                }
            })
        })()
    </script>
</head>
<body>
    <div class="container mx-auto">

        <div class="text-center my-20" data-controller="counter" data-counter-count="10">
            <h1 class="text-3xl mb-2" data-target="counter.output"></h1>

            <button data-action="counter#decrement" class="py-2 px-4 bg-green-500 text-white font-extrabold rounded-lg hover:bg-green-700">-</button>
            <button data-action="counter#increment" class="py-2 px-4 bg-blue-500 text-white font-extrabold rounded-lg hover:bg-blue-700">+</button>
        </div>

    </div>
</body>
</html>
